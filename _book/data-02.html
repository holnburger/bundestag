<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Geschlechterunterschiede im Deutschen Bundestag</title>
  <meta name="description" content="Geschlechterunterschiede im Deutschen Bundestag">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Geschlechterunterschiede im Deutschen Bundestag" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Geschlechterunterschiede im Deutschen Bundestag" />
  
  
  

<meta name="author" content="Josef Holnburger und Gina-Gabriela Görner">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-01.html">
<link rel="next" href="literatur-und-quellverzeichnis.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Einleitung</a></li>
<li class="chapter" data-level="2" data-path="data-01.html"><a href="data-01.html"><i class="fa fa-check"></i><b>2</b> Datenerhebung Teil 1</a><ul>
<li class="chapter" data-level="2.1" data-path="data-01.html"><a href="data-01.html#xml-knoten-und-attribute"><i class="fa fa-check"></i><b>2.1</b> XML-Knoten und Attribute</a></li>
<li class="chapter" data-level="2.2" data-path="data-01.html"><a href="data-01.html#zwischenfazit"><i class="fa fa-check"></i><b>2.2</b> Zwischenfazit</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-02.html"><a href="data-02.html"><i class="fa fa-check"></i><b>3</b> Datenerhebung Teil 2</a><ul>
<li class="chapter" data-level="3.1" data-path="data-02.html"><a href="data-02.html#zwischenfazit-1"><i class="fa fa-check"></i><b>3.1</b> Zwischenfazit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="literatur-und-quellverzeichnis.html"><a href="literatur-und-quellverzeichnis.html"><i class="fa fa-check"></i>Literatur- und Quellverzeichnis</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Geschlechterunterschiede im Deutschen Bundestag</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-02" class="section level1">
<h1><span class="header-section-number">Kapitel 3</span> Datenerhebung Teil 2</h1>
<p>Leider gibt es keine Möglichkeit, die XML-Protokolle des Deutschen Bundestages gesammelt herunterzuladen. Zwar finden sich auf <em>Open Data</em>-Seite des Bundestags<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> die Verweise auf die Bundestagsprotkolle, allerdings können diese nur umständlich einezln heruntergeladen werden.
Durch das Auslesen der Netzwerkdaten nach einem Klick auf die nächsten fünf Protkolle eine Webseite gefunden werden, auf welcher jeweils fünf Protkolle gespeichert sind<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Durch setzen des <code>offset=0</code> auf <code>5, 10, 15, 20, …</code> können wir die weiteren Protokolle abrufen.</p>
<p>Mittels <code>rvest</code> und <code>xml2</code> ziehen wir uns zunächst die Nummer des letzten Bundestagsprotokolls. Über die Funktion <code>seq()</code> und <code>paste0()</code> können wir anschließend alle für den weiteren Verlauf notwendigen URLs erstellen.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">bt_website &lt;-<span class="st"> &quot;https://www.bundestag.de/ajax/filterlist/de/service/opendata/-/543410&quot;</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">last_protocol &lt;-<span class="st"> </span>bt_website <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">  </span><span class="kw">xml_find_first</span>(<span class="st">&quot;//strong&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">  </span><span class="kw">xml_text</span>(<span class="dt">trim =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">  </span><span class="kw">str_extract</span>(<span class="st">&quot;</span><span class="ch">\\</span><span class="st">d+&quot;</span>)</a>
<a class="sourceLine" id="cb18-8" data-line-number="8"></a>
<a class="sourceLine" id="cb18-9" data-line-number="9">prot_websites &lt;-<span class="st"> </span><span class="kw">paste0</span>(bt_website, <span class="st">&quot;?offset=&quot;</span>, <span class="kw">seq</span>(<span class="dv">0</span>, last_protocol, <span class="dv">5</span>))</a></code></pre></div>
<p>Insgesamt müssen wir also 13 Webseiten aufrufen und uns jeweils fünf Protokolle herunterladen.</p>
<p>Der Aufwand ist hier noch überschaubar. Natürlich laden wir die Protokolle dennoch nicht per Hand herunter, sondern erstellen uns hierfür ein kleines Script. Da die meisten Rechner auch mit mehr als nur einem Prozessor ausgestattet sind, können wir die Funktion auch auf mehreren Prozessoren ausführen. Wir sprechen hier von <em>multiprocessing</em>. Dies realisieren wir über das Packet <code>furrr</code> <span class="citation">(Vaughan/Dancho <a href="#ref-vaughan_2018">2018</a>)</span> - eine Abwandlung des bereits genutzten <code>purrr</code>.</p>
<p>Wir schreiben uns zunächst eine Funktion, um die Links der Webseiten zu extrahieren.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">get_prot_links &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">  x <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">    </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">    </span><span class="kw">html_nodes</span>(<span class="st">&quot;.bt-link-dokument&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="st">    </span><span class="kw">html_attr</span>(<span class="st">&quot;href&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">    </span><span class="kw">paste0</span>(<span class="st">&quot;https://www.bundestag.de&quot;</span>, .)</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb19-8" data-line-number="8"></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="kw">get_prot_links</span>(bt_website)</a></code></pre></div>
<pre><code>## [1] &quot;https://www.bundestag.de/blob/578466/7430bccaf792e7bc55e84d5e64675820/19062-data.xml&quot;
## [2] &quot;https://www.bundestag.de/blob/577958/e2063c0f51a32690a269f48aa6102c1d/19061-data.xml&quot;
## [3] &quot;https://www.bundestag.de/blob/577622/da97888b713abb16ed2070836504b83a/19060-data.xml&quot;
## [4] &quot;https://www.bundestag.de/blob/575138/b5395a975d1c55838da0e52251018160/19059-data.xml&quot;
## [5] &quot;https://www.bundestag.de/blob/574826/0e3659e11c1c3cdbfa621369cd16735a/19058-data.xml&quot;</code></pre>
<p>Dies wenden wir nun auf alle 13 Webseiten an und speichern die Dateien anschließend im Ordner <code>data\protokolle</code>.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">library</span>(furrr)</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">plan</span>(multiprocess)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4">prot_links &lt;-<span class="st"> </span><span class="kw">future_map</span>(prot_websites, <span class="op">~</span><span class="kw">get_prot_links</span>(.)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unlist</span>()</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"></a>
<a class="sourceLine" id="cb21-6" data-line-number="6">prot_links <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">future_map</span>(<span class="op">~</span><span class="kw">download.file</span>(., <span class="kw">file.path</span>(<span class="st">&quot;data&quot;</span>, <span class="kw">basename</span>(.))))</a></code></pre></div>
<p>Wir waren erfolgreich und konnten in wenigsten Sekunden alle aktuellen Protokolle herunterladen. Wir können sie jetzt auslesen und dabei auch unsere bereits erstellten Funktionen verwenden. Jetzt können wir alle Dateien einlesen, die Übersicht der Reden oder den Inhalt der Reden extrahieren und anschließend auswerten.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">source</span>(<span class="st">&quot;functions/get_overview_df.R&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="kw">source</span>(<span class="st">&quot;functions/get_speeches_df.R&quot;</span>)</a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">prot_files &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="st">&quot;data&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2"></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">prot_extract &lt;-<span class="st"> </span><span class="kw">map</span>(prot_files, <span class="op">~</span><span class="kw">read_html</span>(.) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">xml_find_all</span>(<span class="st">&quot;//rede&quot;</span>))</a>
<a class="sourceLine" id="cb23-4" data-line-number="4"></a>
<a class="sourceLine" id="cb23-5" data-line-number="5"><span class="kw">class</span>(prot_extract) &lt;-<span class="st"> &quot;xml_nodeset&quot;</span></a>
<a class="sourceLine" id="cb23-6" data-line-number="6"></a>
<a class="sourceLine" id="cb23-7" data-line-number="7">prot_overview &lt;-<span class="st"> </span><span class="kw">map_dfr</span>(prot_extract, <span class="op">~</span><span class="kw">get_overview_df</span>(.))</a></code></pre></div>
<div id="zwischenfazit-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Zwischenfazit</h2>
<p>Wir konnten nun alle Dateien herunterladen und anschließend alle Protkolle in R einlesen. Mit unserer Funktion <code>get_overview_df()</code> konnten wir alle Protokolle in einen für uns passenden Datenframe umwandeln. Insgesamt können wir derzeit 5.777 Reden des aktuellen Bundestags untersuchen – etwa nach der Person, welche die meisten reden gehalten hat.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">prot_overview <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(redner_id, redner_vorname, redner_nachname,</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">           redner_fraktion, redner_rolle) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">reden =</span> <span class="kw">n</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-5" data-line-number="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>reden)</a></code></pre></div>
<pre><code>## # A tibble: 773 x 6
## # Groups:   redner_id, redner_vorname, redner_nachname, redner_fraktion
## #   [728]
##    redner_id redner_vorname redner_nachname redner_fraktion redner_rolle
##    &lt;chr&gt;     &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;       
##  1 11002617  Peter          Altmaier        &lt;NA&gt;            Bundesminis…
##  2 999990073 Olaf           Scholz          &lt;NA&gt;            Bundesminis…
##  3 11004427  Volker         Ullrich         CDU/CSU         &lt;NA&gt;        
##  4 11001478  Angela         Merkel          &lt;NA&gt;            Bundeskanzl…
##  5 11004809  Heiko          Maas            &lt;NA&gt;            Bundesminis…
##  6 11004851  Frauke         Petry           fraktionslos    &lt;NA&gt;        
##  7 11004798  Alexander Graf Lambsdorff      FDP             &lt;NA&gt;        
##  8 11003625  Andreas        Scheuer         &lt;NA&gt;            Bundesminis…
##  9 999990074 Svenja         Schulze         &lt;NA&gt;            Bundesminis…
## 10 11003638  Jens           Spahn           &lt;NA&gt;            Bundesminis…
## # ... with 763 more rows, and 1 more variable: reden &lt;int&gt;</code></pre>
<p>Die Minister_innen haben am häuiigsten im Bundestag geredet, der MdB Volker Ullrich landet erst af Platz 4 mit insgesamt vierzig Reden in der aktuellen Wahlperiode. Überraschenderweise hat Frauke Petry sehr viele Reden gehalten: 35 Stück. Das sind deutlich mehr als in ihrer damaligen Zeit im Landesparlament.</p>

</div>
</div>
<h3>Literatur- und Quellverzeichnis</h3>
<div id="refs" class="references">
<div id="ref-vaughan_2018">
<p>Vaughan, Davis/Dancho, Matt (2018): Furrr: Apply Mapping Functions in Parallel Using Futures. Text abrufbar unter: <a href="https://CRAN.R-project.org/package=furrr">https://CRAN.R-project.org/package=furrr</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="https://www.bundestag.de/service/opendata" class="uri">https://www.bundestag.de/service/opendata</a><a href="data-02.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="https://www.bundestag.de/ajax/filterlist/de/service/opendata/-/543410?offset=0" class="uri">https://www.bundestag.de/ajax/filterlist/de/service/opendata/-/543410?offset=0</a><a href="data-02.html#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-01.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="literatur-und-quellverzeichnis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["bundestag.pdf", "bundestag.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
